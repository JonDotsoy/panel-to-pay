(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{5301:function(e,r,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return t(1713)}])},1713:function(e,r,t){"use strict";t.r(r),t.d(r,{IndexPage:function(){return ve},default:function(){return ye}});var n=t(5893),a=t(7294),o=t(1664),i=t(1190),l=t(4184),s=t.n(l);function c(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function u(e,r){if(null==e)return{};var t,n,a=function(e,r){if(null==e)return{};var t,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)t=o[n],r.indexOf(t)>=0||(a[t]=e[t]);return a}(e,r);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)t=o[n],r.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var d=function(e){return function(r){var t=r.className,n=r.size,o=void 0===n?"5":n,i=u(r,["className","size"]);return(0,a.createElement)(e.type,function(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{},n=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),n.forEach((function(r){c(e,r,t[r])}))}return e}({},e.props,i,{className:s()(t,"w-".concat(o," h-").concat(o))}))}},f=d((0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:(0,n.jsx)("path",{d:"M5 3a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2V5a2 2 0 00-2-2H5zM5 11a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2v-2a2 2 0 00-2-2H5zM11 5a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V5zM14 11a1 1 0 011 1v1h1a1 1 0 110 2h-1v1a1 1 0 11-2 0v-1h-1a1 1 0 110-2h1v-1a1 1 0 011-1z"})})),h=d((0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:(0,n.jsx)("path",{d:"M5 3a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2V5a2 2 0 00-2-2H5zM5 11a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2v-2a2 2 0 00-2-2H5zM11 5a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V5zM11 13a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})})),m=t(9586),v=t(5321),y=t(8301),b=function(e){return"object"===typeof e&&null!==e},g=function(e){return"number"===typeof e},x=function(e){return b(e)&&g(e.seconds)&&g(e.nanoseconds)},p=function(e){return function(e){if(!b(e))return null;if(!x(e.createdAt))return null;var r,t=e.name,n=null!==(r=e.period)&&void 0!==r?r:{},a=e.updatedAt;return{name:"string"===typeof t?t:void 0,period:n,updatedAt:x(a)?new v.EK(a.seconds,a.nanoseconds).toDate():void 0,createdAt:new v.EK(e.createdAt.seconds,e.createdAt.nanoseconds).toDate()}}(e.data())},j=t(5369);function w(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var O=function(e,r,t){var n=(0,a.useMemo)((function(){return(0,j.D5)(r.reduce((function(r,t){return function(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{},n=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),n.forEach((function(r){w(e,r,t[r])}))}return e}({},r,w({},t,e[t]))}),{}))}),t),o=(0,a.useState)(n),i=o[0],l=o[1];return{changed:(0,a.useMemo)((function(){return!n.equals(i)}),[i,n]),values:i,set:function(){for(var e=arguments.length,r=new Array(e),t=0;t<e;t++)r[t]=arguments[t];return function(e){l((function(t){return t.setIn(r,e)}))}}}},N=d((0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:(0,n.jsx)("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})),S=d((0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:(0,n.jsx)("path",{fillRule:"evenodd",d:"M9.504 1.132a1 1 0 01.992 0l1.75 1a1 1 0 11-.992 1.736L10 3.152l-1.254.716a1 1 0 11-.992-1.736l1.75-1zM5.618 4.504a1 1 0 01-.372 1.364L5.016 6l.23.132a1 1 0 11-.992 1.736L4 7.723V8a1 1 0 01-2 0V6a.996.996 0 01.52-.878l1.734-.99a1 1 0 011.364.372zm8.764 0a1 1 0 011.364-.372l1.733.99A1.002 1.002 0 0118 6v2a1 1 0 11-2 0v-.277l-.254.145a1 1 0 11-.992-1.736l.23-.132-.23-.132a1 1 0 01-.372-1.364zm-7 4a1 1 0 011.364-.372L10 8.848l1.254-.716a1 1 0 11.992 1.736L11 10.58V12a1 1 0 11-2 0v-1.42l-1.246-.712a1 1 0 01-.372-1.364zM3 11a1 1 0 011 1v1.42l1.246.712a1 1 0 11-.992 1.736l-1.75-1A1 1 0 012 14v-2a1 1 0 011-1zm14 0a1 1 0 011 1v2a1 1 0 01-.504.868l-1.75 1a1 1 0 11-.992-1.736L16 13.42V12a1 1 0 011-1zm-9.618 5.504a1 1 0 011.364-.372l.254.145V16a1 1 0 112 0v.277l.254-.145a1 1 0 11.992 1.736l-1.735.992a.995.995 0 01-1.022 0l-1.735-.992a1 1 0 01-.372-1.364z",clipRule:"evenodd"})}));function C(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function P(e,r){if(null==e)return{};var t,n,a=function(e,r){if(null==e)return{};var t,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)t=o[n],r.indexOf(t)>=0||(a[t]=e[t]);return a}(e,r);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)t=o[n],r.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var V=function(e){var r=e.spinning,t=e.children,a=e.className,o=P(e,["spinning","children","className"]);return r?(0,n.jsx)(S,function(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{},n=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),n.forEach((function(r){C(e,r,t[r])}))}return e}({className:s()(a,"animate-spin")},o)):(0,n.jsx)(n.Fragment,{children:t})},D=d((0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:(0,n.jsx)("path",{fillRule:"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z",clipRule:"evenodd"})})),M=t(6168);function k(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function z(e,r){if(null==e)return{};var t,n,a=function(e,r){if(null==e)return{};var t,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)t=o[n],r.indexOf(t)>=0||(a[t]=e[t]);return a}(e,r);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)t=o[n],r.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var E=function(e){var r=e.className,t=e.typeStyle,a=void 0===t?"default":t,o=e.children,i=z(e,["className","typeStyle","children"]);return(0,n.jsx)("button",function(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{},n=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),n.forEach((function(r){k(e,r,t[r])}))}return e}({},i,{className:s()("border px-4 py-2 transition-all","primary-solid"===a&&["border-gray-400","hover:border-green-400 hover:bg-green-400 hover:shadow-md hover:text-white","hover:border-green-400 focus:bg-green-400 focus:shadow-md focus:text-white"],"default-solid"===a&&["border-gray-400","hover:border-gray-400 hover:bg-gray-400 hover:shadow-md hover:text-white","hover:border-gray-400 focus:bg-gray-400 focus:shadow-md focus:text-white"],"default"===a&&["border-gray-400 text-gray-500","hover:border-gray-600 hover:shadow-md hover:text-gray-900","focus:border-gray-600 focus:shadow-md focus:text-gray-900"],"secondary"===a&&["border-blue-400 text-blue-500","hover:border-blue-600 hover:shadow-md hover:bg-blue-500 hover:text-white","focus:border-blue-600 focus:shadow-md focus:bg-blue-500 focus:text-white"],"primary"===a&&["border-green-400 text-green-500","hover:border-green-600 hover:shadow-md hover:bg-green-500 hover:text-white","focus:border-green-600 focus:shadow-md focus:bg-green-500 focus:text-white"],"primary-hover"===a&&["border-gray-400 text-gray-500","hover:border-green-600 hover:shadow-md hover:bg-green-500 hover:text-white","focus:border-green-600 focus:shadow-md focus:bg-green-500 focus:text-white"],"danger-solid"===a&&["border-red-400 text-red-500","hover:border-red-400 hover:bg-red-400 hover:shadow-md hover:text-white","hover:border-red-400 focus:bg-red-400 focus:shadow-md focus:text-white"],"danger"===a&&["border-red-400 text-red-500","hover:border-red-400 hover:bg-red-400 hover:shadow-md hover:text-white","hover:border-red-400 focus:bg-red-400 focus:shadow-md focus:text-white"],"danger-hover"===a&&["border-gray-400 text-gray-500","hover:border-red-400 hover:bg-red-400 hover:shadow-md hover:text-white","hover:border-red-400 focus:bg-red-400 focus:shadow-md focus:text-white"],"disabled"===a&&["border-gray-300 text-gray-300 cursor-default"],r),children:o}))},A=function(e){var r=e.doc,t=(0,a.useState)(!0),o=(t[0],t[1],function(e){var r=(0,i.a)().user,t=(0,a.useState)(!1),n=t[0],o=t[1],l=(0,a.useState)(!1),s=l[0],c=l[1],u=(0,m.n)().refresh;return{loading:n,deleted:s,deleteCharge:function(){r&&(o(!0),(0,v.oe)((0,v.JU)(y.db,"docs",r.uid,"charges",e.id)).then((function(){u(),c(!0)})).finally((function(){o(!1)})))}}}(r)),l=o.loading,c=o.deleted,u=o.deleteCharge;return(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(M.fC,{children:[(0,n.jsx)(M.xz,{asChild:!0,children:(0,n.jsx)(E,{className:"flex justify-center items-center",typeStyle:"danger-hover",disabled:l||c,children:c?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(N,{className:"mr-2"})," Eliminado"]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(V,{spinning:l,className:"mr-2",children:(0,n.jsx)(D,{className:"mr-2"})})," Eliminar"]})})}),(0,n.jsx)(M.VY,{className:"bg-gray-700 bg-opacity-30 w-screen h-screen flex justify-center items-center",children:(0,n.jsxs)("div",{className:"min-w-md w-auto bg-white p-5 shadow-lg rounded",style:{minWidth:500},children:[(0,n.jsx)(M.Dx,{className:"",children:"\xbfEst\xe1s seguro?"}),(0,n.jsxs)("div",{className:"flex space-x-2 justify-end",children:[(0,n.jsx)(M.$j,{asChild:!0,children:(0,n.jsx)("button",{className:s()("transition-all flex border justify-center items-center px-4 py-2","border-gray-300 hover:border-blue-400 hover:text-white hover:shadow-md hover:bg-blue-400","border-gray-300 focus:border-blue-400 focus:text-white focus:shadow-md focus:bg-blue-400"),children:"Cancelar"})}),(0,n.jsx)(M.aU,{asChild:!0,children:(0,n.jsxs)("button",{className:s()("transition-all flex border justify-center items-center px-4 py-2","border-gray-300 hover:border-red-400 hover:text-white hover:shadow-md hover:bg-red-400","border-gray-300 focus:border-red-400 focus:text-white focus:shadow-md focus:bg-red-400"),onClick:function(){return u()},children:[(0,n.jsx)(D,{className:"mr-2"}),"Eliminar"]})})]})]})})]})})},F=d((0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:(0,n.jsx)("path",{d:"M7.707 10.293a1 1 0 10-1.414 1.414l3 3a1 1 0 001.414 0l3-3a1 1 0 00-1.414-1.414L11 11.586V6h5a2 2 0 012 2v7a2 2 0 01-2 2H4a2 2 0 01-2-2V8a2 2 0 012-2h5v5.586l-1.293-1.293zM9 4a1 1 0 012 0v2H9V4z"})})),T=t(5666),I=t.n(T),L=t(5475);function _(e,r,t,n,a,o,i){try{var l=e[o](i),s=l.value}catch(c){return void t(c)}l.done?r(s):Promise.resolve(s).then(n,a)}function H(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}(0,t(9539).promisify)(L.setTimeout);var K=function(e){var r=(0,i.a)().user,t=(0,a.useState)(!1),n=t[0],o=t[1],l=(0,a.useState)(!1),s=l[0],c=l[1],u=(0,m.n)().refresh;(0,a.useEffect)((function(){c(!1)}),[e]);return{loading:n,updated:s,updateCharge:function(t){var n;r&&(o(!0),(0,v.r7)((0,v.JU)(y.db,"docs",r.uid,"charges",e.id),function(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{},n=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),n.forEach((function(r){H(e,r,t[r])}))}return e}({},t,{updatedAt:new Date})).then((n=I().mark((function e(){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:u(),c(!0);case 2:case"end":return e.stop()}}),e)})),function(){var e=this,r=arguments;return new Promise((function(t,a){var o=n.apply(e,r);function i(e){_(o,t,a,i,l,"next",e)}function l(e){_(o,t,a,i,l,"throw",e)}i(void 0)}))})).finally((function(){o(!1)})))}}},B=new Intl.DateTimeFormat(void 0,{timeStyle:"medium",dateStyle:"full"}),J=new Intl.DateTimeFormat(void 0,{timeStyle:void 0,dateStyle:"full"}),R=t(4155),U=["monthly"];function W(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function Y(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function $(e,r,t){return r&&Y(e.prototype,r),t&&Y(e,t),e}function Q(e){return function(e){if(Array.isArray(e)){for(var r=0,t=new Array(e.length);r<e.length;r++)t[r]=e[r];return t}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var X=function(){function e(r){W(this,e),this.date=r,this.keyParts=[r.getFullYear(),r.getMonth()],this.fullKeyParts=[r.getFullYear(),r.getMonth()],this.str=["period-point","monthly"].concat(Q(this.keyParts)).join(":"),this.strFull=["period-point","monthly"].concat(Q(this.fullKeyParts)).join(":")}return $(e,[{key:"toDate",value:function(){return this.date}},{key:"toKey",value:function(){return this.str}},{key:"toJSON",value:function(){return this.toKey()}}]),e}(),q=function(){function e(r,t){W(this,e),this.type=r,this.opts=t}return $(e,[{key:"nextDate",value:function(e){var r=void 0===e?new Date:e;if("monthly"===this.type){var t=function(e,r){var t=new Date(e);return t.setHours(0,0,0,0),t.setDate(1),r>0&&t.setDate(r),r<0&&(t.setMonth(t.getMonth()+1),t.setDate(r+1)),t}(r,this.opts.dayOfMonth);return new X(t)}throw new Error("Not implemented ".concat(this.type))}},{key:"range",value:I().mark((function e(r,t){var n,a,o,i=void 0===r?new Date:r,l=void 0===t?10:t;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=new Date(i),a=0;case 2:if(!(a<l)){e.next=11;break}return e.next=5,this.nextDate(n);case 5:(o=new Date(n)).setMonth(o.getMonth()+1),n=o;case 8:a++,e.next=2;break;case 11:case"end":return e.stop()}}),e,this)}))}],[{key:"fromNoTyped",value:function(r){return"object"!==typeof r||null===r||void 0===r.type?null:U.includes(r.type)&&"monthly"===r.type?"number"!==typeof r["day-of-month"]?null:new e(r.type,{dayOfMonth:r["day-of-month"]}):null}},{key:"from",value:function(e){return this.fromNoTyped(e)}}]),e}(),G=[[-1,"Ultimo dia del mes"],[-2,"Anteultimo dia del mes"],[-3,"Tres dias ante del fin de mes"],[-4,"Cuatro dias ante del fin de mes"],[-5,"Cinco dias ante del fin de mes"],[-6,"Seis dias ante del fin de mes"],[-7,"Siete dias ante del fin de mes"],[1,"Primer dia del mes"],[2,"Segundo dia del mes"],[3,"Tercer dia del mes"],[4,"Cuarto dia del mes"],[5,"Quinto dia del mes"],[6,"Sexto dia del mes"],[7,"Septimo dia del mes"],[8,"Octavo dia del mes"],[9,"Noveno dia del mes"],[10,"Decimo dia del mes"],[11,"Onceavo dia del mes"],[12,"Doceavo dia del mes"],[13,"Treceavo dia del mes"],[14,"Catorceavo dia del mes"],[15,"Quinceavo dia del mes"],[16,"Diciseisavo dia del mes"],[17,"Dicisieteavo dia del mes"],[18,"Diciochoavo dia del mes"],[19,"Diciennoveavo dia del mes"],[20,"Veinteavo dia del mes"],[21,"Veintiunoavo dia del mes"],[22,"Veintidosavo dia del mes"],[23,"Veintitresavo dia del mes"],[24,"Veinticuatroavo dia del mes"],[25,"Veinticincoavo dia del mes"],[26,"Veintiseisavo dia del mes"],[27,"Veintisieteavo dia del mes"],[28,"Veintiochoavo dia del mes"]],Z=d((0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:(0,n.jsx)("path",{d:"M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z"})})),ee=new Map,re=function(e,r){var t=function(e){var r=ee.get(e);if(!r){var t=new Map;return ee.set(e,t),t}return r}(e),n=t.get(r);if(!n){var a=new Intl.NumberFormat(e,{style:"currency",currency:r,currencyDisplay:"name"});return t.set(r,a),a}return n},te=(0,a.createContext)({locale:"es-CL"});function ne(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function ae(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{},n=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),n.forEach((function(r){ne(e,r,t[r])}))}return e}function oe(e,r){if(null==e)return{};var t,n,a=function(e,r){if(null==e)return{};var t,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)t=o[n],r.indexOf(t)>=0||(a[t]=e[t]);return a}(e,r);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)t=o[n],r.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var ie=0,le=function(e){e.helpStringFormat;var r=e.defaultValue,t=e.onChange,o=e.locale,i=void 0===o?(0,a.useContext)(te).locale:o,l=e.currency,s=void 0===l?"CLP":l,c=e.pattern,u=void 0===c?"^d+$":c,d=e.type,f=void 0===d?"number":d,h=e.options,m=e.onChangeValue,v=oe(e,["helpStringFormat","defaultValue","onChange","locale","currency","pattern","type","options","onChangeValue"]),y=((0,a.useMemo)((function(){return"item-".concat(ie++)}),[]),(0,a.useRef)(null)),b=(0,a.useState)(r),g=b[0],x=b[1],p=(0,a.useState)(!h),j=p[0],w=p[1],O=(0,a.useMemo)((function(){return Number(g)}),[g]),N=Number.isNaN(O)||!O;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"flex justify-start items-center text-xl pb-2",children:N?"Selecciona un valor":re(i,s).format(O)}),h&&(0,n.jsxs)("div",{className:"inline-flex flex-wrap",style:{maxWidth:600},children:[null===h||void 0===h?void 0:h.map((function(e){var r=e.value;return(0,n.jsx)(E,{onClick:function(){return x((e=r).toString()),null===m||void 0===m||m(e),void(y.current&&(y.current.value=e.toString()));var e},typeStyle:O===r?"disabled":"default",disabled:O===r,className:"inline-flex",children:re(i,s).format(r)},r)})),(0,n.jsxs)(E,{onClick:function(){return w((function(e){return!e}))},className:"inline-flex justify-center items-center",children:[(0,n.jsx)(Z,{className:"mr-2"})," Otro"]})]}),j&&(0,n.jsx)("div",{className:"flex",children:(0,n.jsx)("input",ae({className:"border p-2 flex-grow",ref:y,defaultValue:g,onChange:function(e){null===t||void 0===t||t(e),x(e.target.value),null===m||void 0===m||m(Number(e.target.value))},pattern:u,type:f,autoFocus:!0},v))})]})};function se(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function ce(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var t=[],n=!0,a=!1,o=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done)&&(t.push(i.value),!r||t.length!==r);n=!0);}catch(s){a=!0,o=s}finally{try{n||null==l.return||l.return()}finally{if(a)throw o}}return t}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var ue=function(e){var r=e.i,t=e.date,o=e.onChange,i=e.defaultValues,l=ce(a.useState(i),2),s=(l[0],l[1]);return(0,n.jsx)("div",{children:(0,n.jsxs)(M.fC,{children:[(0,n.jsx)(M.xz,{asChild:!0,children:(0,n.jsx)(E,{typeStyle:i?"secondary":"default",children:J.format(t)})}),(0,n.jsx)(M.VY,{className:"bg-gray-700 bg-opacity-30 w-screen h-screen flex items-center justify-center ",children:(0,n.jsxs)("div",{style:{minWidth:500},className:"bg-white p-4 space-y-4 shadow-md border border-gray-400",children:[(0,n.jsxs)(M.Dx,{children:[(0,n.jsx)("div",{children:"Fecha de pago"}),(0,n.jsx)("h2",{className:"text-xl",children:J.format(t)})]}),(0,n.jsx)(M.dk,{children:(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{htmlFor:"vl-pay-".concat(r),children:"Valor"}),(0,n.jsx)(le,{id:"vl-pay-".concat(r),onChangeValue:function(e){s((function(r){var t=function(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{},n=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),n.forEach((function(r){se(e,r,t[r])}))}return e}({},r,{currency:e});return null===o||void 0===o||o(t),t}))},defaultValue:null===i||void 0===i?void 0:i.currency,options:[{value:38e4},{value:1e3},{value:3e4},{value:9e4}]})]})}),(0,n.jsxs)("div",{className:"flex justify-end space-x-2",children:[(0,n.jsx)(M.$j,{asChild:!0,children:(0,n.jsx)(E,{typeStyle:"secondary",children:"Cancelar"})}),(0,n.jsx)(M.aU,{asChild:!0,children:(0,n.jsx)(E,{typeStyle:"primary",children:"Marcar como pagado"})})]})]})})]})})};function de(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var t=[],n=!0,a=!1,o=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done)&&(t.push(i.value),!r||t.length!==r);n=!0);}catch(s){a=!0,o=s}finally{try{n||null==l.return||l.return()}finally{if(a)throw o}}return t}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var fe=new Date;fe.setMonth(fe.getMonth()-4);var he=function(e){var r,t=e.defaultValue,o=e.onChange,i=(0,a.useState)((function(){return(0,j.D5)(null!==t&&void 0!==t?t:{})})),l=i[0],s=i[1],c=(0,a.useMemo)((function(){return l.getIn(["type"])}),[l]),u=(0,a.useMemo)((function(){return q.from(l.toJS())}),[l]),d=function(){for(var e=arguments.length,r=new Array(e),t=0;t<e;t++)r[t]=arguments[t];return function(e){return s((function(t){var n=t.setIn(r,e);return(0,R.nextTick)((function(){return null===o||void 0===o?void 0:o(n.toJS())})),n}))}};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{children:[(0,n.jsxs)("select",{className:"p-2 border border-gray-200",onChange:function(e){return d("type")(""===(r=e.target.value)?null:r);var r},defaultValue:t.type,children:[(0,n.jsx)("option",{value:"",children:"Select"}),"/",(0,n.jsx)("option",{value:"monthly",children:"Todos los meses"})]}),"monthly"===c&&(0,n.jsxs)("select",{className:"p-2 border border-gray-200",onChange:function(e){return d("day-of-month")(""===(r=e.target.value)?null:Number(r));var r},defaultValue:t["day-of-month"],children:[(0,n.jsx)("option",{value:"",children:"Select"}),G.map((function(e){var r=de(e,2),t=r[0],a=r[1];return(0,n.jsx)("option",{value:t,children:a},t)}))]})]}),u&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{children:["Siguiente pago el ",u&&J.format(u.nextDate().toDate())]}),(0,n.jsx)("div",{children:(0,n.jsx)("div",{className:"flex flex-wrap",children:Array.from(null!==(r=null===u||void 0===u?void 0:u.range(fe,7))&&void 0!==r?r:[]).map((function(e,r){var a;return(0,n.jsx)(ue,{i:r,date:e.toDate(),onChange:d("history",e.toKey()),defaultValues:null===t||void 0===t||null===(a=t.history)||void 0===a?void 0:a[e.toKey()]},r)}))})})]})]})},me=function(e){var r=e.doc,t=p(r),a=O(t,["name","period"],[r]),o=a.changed,i=a.set,l=a.values,c=K(r),u=c.loading,d=c.updated,f=c.updateCharge;if(!t)return(0,n.jsx)("div",{children:"Sin info"});var h=t.name,m=t.createdAt,v=t.period;return(0,n.jsx)("div",{className:"border p-4",children:(0,n.jsxs)("form",{onSubmit:function(e){e.preventDefault(),f(l.toJS())},children:[(0,n.jsx)("div",{children:(0,n.jsx)("input",{type:"text",name:"name",defaultValue:h,onChange:function(e){return i("name")(e.target.value)},className:s()("w-full border p-2 border-gray-200","hover:border-gray-300"),placeholder:"Titulo Cobro",autoComplete:"off"})}),(0,n.jsx)("div",{children:(0,n.jsx)(he,{defaultValue:v,onChange:function(e){return i("period")(e)}})}),o&&(0,n.jsx)("div",{children:"* Con cambios"}),(0,n.jsxs)("div",{className:"text-sm text-gray-500",children:["Creado el ",B.format(m),t.updatedAt&&(0,n.jsxs)(n.Fragment,{children:[" y actualizado por ultima vez el ",B.format(t.updatedAt)]})]}),(0,n.jsxs)("div",{className:"flex space-x-2",children:[(0,n.jsx)(E,{className:s()("transition-all flex justify-center items-center"),typeStyle:o?"primary":"disabled",disabled:!o,children:d?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(N,{className:"mr-2"}),"Cambio guardados"]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(V,{className:"mr-2",spinning:u,children:(0,n.jsx)(F,{className:"mr-2"})}),"Guardar Cambios"]})}),(0,n.jsx)(A,{doc:r})]})]})})},ve=function(){var e=(0,i.a)().user,r=(0,m.n)(),t=r.loading,l=r.docs,s=r.pull,c=function(){var e=(0,i.a)().user,r=(0,a.useState)(!1),t=r[0],n=r[1],o=(0,m.n)().refresh;return{loading:t,createCharge:function(){e&&(n(!0),(0,v.ET)((0,v.hJ)(y.db,"docs",e.uid,"charges"),{name:"",createdAt:new Date}).then((function(){o()})).finally((function(){n(!1)})))}}}(),u=c.loading,d=c.createCharge;return(0,a.useEffect)((function(){s()}),[]),(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("div",{className:"container m-auto p-2",style:{maxWidth:900},children:[(0,n.jsx)("div",{className:"pb-10",children:e?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("h1",{className:"text-7xl",children:["Hello ",(0,n.jsx)("span",{className:"text-blue-500",children:e.displayName})]}),(0,n.jsx)("div",{children:(0,n.jsx)(o.default,{href:"/sign-out",children:(0,n.jsx)("a",{className:"text-2xl transition-all text-blue-400 hover:text-blue-600",children:"Cerrar sesion"})})})]}):(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("h1",{className:"text-7xl",children:["Hello, need to ",(0,n.jsx)(o.default,{href:"/sign-in",children:(0,n.jsx)("a",{className:"text-blue-500",children:"login"})}),"."]})})}),e&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"pb-10",children:(0,n.jsxs)(E,{typeStyle:"secondary",className:"flex justify-center items-center",disabled:u,onClick:d,children:[(0,n.jsx)("span",{children:"Agregar Cobro"}),u&&(0,n.jsx)(h,{className:"ml-2 animate-spin",size:"6"}),!u&&(0,n.jsx)(f,{className:"ml-2",size:"6"})]})}),(0,n.jsx)("div",{children:(0,n.jsxs)("h2",{className:"text-2xl inline-flex justify-start items-end",children:[(0,n.jsxs)("span",{className:"inline-flex justify-start items-center",children:[(0,n.jsx)(h,{className:"mr-2"}),"Cobros"]}),t&&(0,n.jsxs)("span",{className:"inline-flex justify-center items-center ml-4 text-gray-500 text-lg",children:[(0,n.jsx)(V,{spinning:!0,className:"mr-2"})," Loading..."]})]})}),(0,n.jsx)("div",{children:(0,n.jsx)("div",{className:"space-y-4",children:l.map((function(e){return(0,n.jsx)(me,{doc:e},e.id)}))})})]})]})})},ye=ve}},function(e){e.O(0,[180,774,888,179],(function(){return r=5301,e(e.s=r);var r}));var r=e.O();_N_E=r}]);